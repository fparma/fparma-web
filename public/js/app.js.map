{"version":3,"sources":["app.js"],"names":["$","isMobile","$navMobile","is","escapeHTML","text","html","dateFormat","window","load","FastClick","attach","document","body","Cookies","get","removeClass","hide","fadeIn","on","set","expires","fadeOut","this","closest","transition","dropdown","popup","events","length","DATE_PREFERENCE","localStorage","getItem","update","val","each","$date","attr","time","moment","replace","format","fromNow","addClass","$this","data","siblings","setItem","click","form","inline","fields","nick","rules","type","prompt","remark","squadSettings","hasClass","fadeToggle","duration","complete","find","date","local","utc","e","target","checked","root","loader","prepareAndLoadImage","imgEl","dfd","Deferred","done","state","resolve","setTimeout","parentsUntil","remove","promise","prepareRows","amountRows","dfds","i","$row","rowImages","loaded","push","then","img","when","apply","loadMoreRows","isFirstLoad","args","slice","call","arguments","remainingRows","show","run","enough","next","cur","shift","Math","random","onComplete","LOAD_MORE_AMOUNT","featherlightGallery","beforeOpen","stopPropagation","open","src","beforeContent","$instance","afterContent","$currentTarget","$container","caption","author","parent","waypoint","direction","self","disable","Waypoint","refreshAll","enable","offset","rootVideos","rootScreenshots","blocked","firstVideosLoaded","showingScreenshots","switchDone","loadFirstVideos","loadVideos","param","convertInput","el","embed","autoplay","amount","searchSelect","updatePath","id","history","replaceState","fullTextSearch","onChange","value","q","$log","ajax","url","contentType","JSON","stringify","error","$html","replaceWith","$info","onFail","d","append","fail","response","ok","states","unknown","waiting","playing","$div","name","adress","island","mission","players","list","maxPlayers","forEach","v","position","lastResort","ts3","l","$eventSlotsForm","isBusy","handleSlotBtnClick","endpoint","$itemSlot","eventId","slotId","success","location","reload","msg","jQuery","a","define","amd","exports","module","b","c","noConflict","f","g","path","defaults","h","Date","setMilliseconds","getMilliseconds","test","encodeURIComponent","String","decodeURIComponent","escape","cookie","toUTCString","domain","secure","join","j","split","k","m","n","o","charAt","json","parse","getJSON","withConverter"],"mappings":"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","file":"app.js","sourcesContent":["(function ($) {\r\n  var dateFormat = 'YYYY-MMM-DD, HH:mm (dddd)'\r\n\r\n  var $navMobile = $('nav .mobile-only')\r\n  function isMobile () {\r\n    return $navMobile.is(':visible')\r\n  }\r\n\r\n  function escapeHTML (text) {\r\n    return $('<span />').text(text).html()\r\n  }\r\n\r\n  $(window).load(function () {\r\n    window.FastClick.attach(window.document.body)\r\n    if (!window.Cookies.get('cookies_consent')) {\r\n      $('#cookies').removeClass('invis')\r\n      .hide()\r\n      .fadeIn()\r\n      .on('click', '.button', function () {\r\n        window.Cookies.set('cookies_consent', true, {expires: 180})\r\n        $('#cookies').fadeOut()\r\n      })\r\n    }\r\n  })\r\n\r\n  $('.message .close').on('click', function () {\r\n    $(this).closest('.message').transition('fade')\r\n  })\r\n\r\n  $('.ui.dropdown:not(\"#log-search\")').dropdown()\r\n\r\n  // Shows a group description\r\n  $('.event-group .grp-desc').popup()\r\n\r\n  !(function () {\r\n    var events = $('#events-list')\r\n    if (!events.length) return\r\n    var DATE_PREFERENCE = window.localStorage && window.localStorage.getItem('date-preference') || 'local'\r\n\r\n    var update = function (val) {\r\n      $('.js-event-date').each(function () {\r\n        var $date = $(this)\r\n        if (val === 'utc') return $date.html($date.attr('data-def'))\r\n        var time = window.moment($date.attr('data-date').replace(/\"/g, ''))\r\n        if (val === 'local') return $date.html(time.format(dateFormat))\r\n        if (val === 'from') return $date.html(time.fromNow())\r\n      })\r\n    }\r\n\r\n    if (DATE_PREFERENCE && DATE_PREFERENCE !== 'utc') {\r\n      update(DATE_PREFERENCE)\r\n      $('#js-date-select .item').removeClass('active')\r\n      $('#js-date-select .item[data-time=\"' + DATE_PREFERENCE + '\"]').addClass('active')\r\n    }\r\n\r\n    $('#js-date-select').on('click', '.item:not(.header, .active)', function () {\r\n      var $this = $(this)\r\n      var val = $this.data('time')\r\n      $this.siblings().removeClass('active')\r\n      $this.addClass('active')\r\n      if (window.localStorage) {\r\n        window.localStorage.setItem('date-preference', val)\r\n      }\r\n      update(val)\r\n    })\r\n  })()\r\n\r\n  !(function () {\r\n    if (!($('#squad-form').length)) return\r\n    $('button[type=\"submit\"]').click(function () {\r\n      $(this).addClass('disabled loading')\r\n    })\r\n    $('#squad-form').form({\r\n      inline: true,\r\n      fields: {\r\n        nick: {\r\n          rules: [{type: 'maxLength[64]', prompt: 'Max 64 characters'}]\r\n        },\r\n        remark: {\r\n          rules: [{type: 'maxLength[128]', prompt: 'Max 128 characters'}]\r\n        }\r\n      }\r\n    })\r\n\r\n    var squadSettings = $('.js-squad')\r\n    if (squadSettings.hasClass('invis')) {\r\n      squadSettings.hide().removeClass('invis').attr('disabled', true)\r\n    }\r\n\r\n    $('#squad-xml-accept').on('click', function () {\r\n      squadSettings.fadeToggle({\r\n        duration: 200,\r\n        complete: function () {\r\n          var $this = $(this)\r\n          $this.find('input').attr('disabled', $this.is(':hidden'))\r\n        }\r\n      })\r\n    })\r\n  })()\r\n\r\n  !(function () {\r\n    if (!$('#event-description').length) return\r\n    var $date = $('#js-date')\r\n    var date = $date.attr('data-date').replace(/['\"]+/g, '')\r\n    var local = window.moment(date).format(dateFormat)\r\n    var utc = window.moment.utc(date).format(dateFormat)\r\n    $date.html(local)\r\n\r\n    $('#js-date-checkbox').on('change', function (e) {\r\n      $date.html(e.target.checked ? utc : local)\r\n    })\r\n  }())\r\n\r\n  !(function () {\r\n    var root = $('#media-screenshots')\r\n    if (!root.length) return\r\n\r\n    root.find('.row').addClass('invis').hide()\r\n    var loader = root.find('.segment.loading').removeClass('invis').hide()\r\n\r\n    var prepareAndLoadImage = function (imgEl) {\r\n      var dfd = $.Deferred()\r\n      imgEl.data('caption', imgEl.attr('data-caption'))\r\n      imgEl.attr('author', imgEl.attr('data-author'))\r\n\r\n      var done = function () {\r\n        if (imgEl.get(0).complete === true) {\r\n          imgEl.addClass('loaded')\r\n        }\r\n        if (dfd.state() === 'pending') dfd.resolve(imgEl)\r\n      }\r\n\r\n      imgEl.load(done)\r\n      window.setTimeout(done, 5000)\r\n\r\n      imgEl.on('error', function () {\r\n        imgEl.parentsUntil('.row').remove()\r\n        imgEl.remove()\r\n        if (dfd.state() === 'pending') dfd.resolve(null)\r\n      })\r\n\r\n      imgEl.attr('src', imgEl.attr('href'))\r\n      return dfd.promise()\r\n    }\r\n\r\n    var prepareRows = function (amountRows) {\r\n      var dfds = []\r\n      root.find('.row.invis').each(function (i) {\r\n        var $row = $(this)\r\n        var rowImages = $row.find('img')\r\n        if (!rowImages.length) return false\r\n\r\n        var loaded = 0\r\n        var dfd = $.Deferred()\r\n        dfds.push(dfd.promise())\r\n        $row.removeClass('invis')\r\n\r\n        rowImages.each(function () {\r\n          prepareAndLoadImage($(this)).then(function (img) {\r\n            loaded++\r\n            if (loaded >= rowImages.length) {\r\n              dfd.resolve($row)\r\n            }\r\n          })\r\n        })\r\n        if (i >= (amountRows - 1)) return false\r\n      })\r\n\r\n      return $.when.apply($, dfds)\r\n    }\r\n\r\n    var loadMoreRows = function (amountRows, isFirstLoad) {\r\n      var dfd = $.Deferred()\r\n      loader.fadeToggle()\r\n\r\n      prepareRows(amountRows).then(function () {\r\n        var args = [].slice.call(arguments)\r\n        if (!args.length) {\r\n          loader.fadeToggle()\r\n          return dfd.resolve(0)\r\n        }\r\n\r\n        var remainingRows = root.find('.row.invis').length\r\n        if (!root.is(':visible')) {\r\n          $.each(args, function () {\r\n            $(this).show()\r\n          })\r\n          loader.hide()\r\n          return dfd.resolve(remainingRows)\r\n        }\r\n\r\n        var run = function () {\r\n          var i = 0\r\n          var enough = (!isFirstLoad || isMobile()) ? 1 : 3\r\n\r\n          var next = function () {\r\n            if (i++ >= enough) {\r\n              $.each(args, function () {\r\n                $(this).show()\r\n              })\r\n              return dfd.resolve(remainingRows)\r\n            }\r\n\r\n            var cur = $(args.shift())\r\n            if (!cur.length) return dfd.resolve(remainingRows)\r\n\r\n            cur.transition('slide down', {\r\n              duration: 150 + (Math.random() * 200),\r\n              onComplete: next\r\n            })\r\n          }\r\n          next()\r\n        }\r\n\r\n        loader.fadeToggle({\r\n          complete: run\r\n        })\r\n      })\r\n      return dfd.promise()\r\n    }\r\n\r\n    var LOAD_MORE_AMOUNT = isMobile() ? 2 : 5\r\n    loadMoreRows(LOAD_MORE_AMOUNT, true).then(function () {\r\n      root.featherlightGallery({\r\n        beforeOpen: function (e) {\r\n          if (isMobile() && e.target) {\r\n            e.stopPropagation()\r\n            window.open(e.target.src)\r\n            return false\r\n          }\r\n        },\r\n        beforeContent: function () {\r\n          this.$instance.find('.text-container').fadeOut('fast')\r\n        },\r\n        afterContent: function () {\r\n          var $this = this.$currentTarget\r\n          var $container = this.$instance.find('.text-container')\r\n          var caption = $this.data('caption')\r\n          var author = $this.data('author')\r\n\r\n          $container.find('.caption').text(caption ? '\"' + caption + '\"' : '')\r\n          $container.find('.author').text(author ? 'Submitted by ' + author : '')\r\n          if (caption || author) $container.fadeIn('fast')\r\n        }\r\n      })\r\n\r\n      // Scroll down - load more.\r\n      // waypoint doesn't like divs that can can be hidden, use parent\r\n      if (!root.find('.row.invis').length) return\r\n      root.parent().waypoint(function (direction) {\r\n        if (root.is(':animated') || !root.is(':visible')) return\r\n        if (direction === 'down') {\r\n          var self = this\r\n          self.disable()\r\n\r\n          loadMoreRows(LOAD_MORE_AMOUNT, false).then(function (remainingRows) {\r\n            if (!remainingRows) return\r\n            window.Waypoint.refreshAll()\r\n            self.enable()\r\n          })\r\n        }\r\n      }, {\r\n        offset: 'bottom-in-view'\r\n      })\r\n    })\r\n  })()\r\n\r\n  !(function () {\r\n    var rootVideos = $('#media-videos')\r\n    if (!rootVideos.length) return\r\n    var rootScreenshots = $('#media-screenshots')\r\n    rootVideos.hide().removeClass('invis')\r\n\r\n    var blocked = false\r\n    var firstVideosLoaded = false\r\n    var showingScreenshots = true\r\n    var LOAD_MORE_AMOUNT = 12\r\n\r\n    var switchDone = function () {\r\n      blocked = false\r\n      window.Waypoint.refreshAll()\r\n      showingScreenshots = !showingScreenshots\r\n    }\r\n\r\n    var loadFirstVideos = function () {\r\n      loadVideos()\r\n      firstVideosLoaded = true\r\n    }\r\n\r\n    $('#js-load-more-videos').on('click', function () {\r\n      loadVideos()\r\n    })\r\n\r\n    $('.js-media-nav').on('click', function () {\r\n      var $this = $(this)\r\n      if (blocked || $this.hasClass('active')) return\r\n\r\n      blocked = true\r\n      $this.addClass('active').siblings().removeClass('active')\r\n      if (!firstVideosLoaded) loadFirstVideos()\r\n      var param = {duration: 100, complete: switchDone}\r\n\r\n      if (showingScreenshots) {\r\n        rootScreenshots.fadeOut({\r\n          duration: 100,\r\n          complete: function () {\r\n            rootVideos.fadeIn(param)\r\n          }\r\n        })\r\n      } else {\r\n        rootVideos.fadeOut({\r\n          duration: 100,\r\n          complete: function () {\r\n            rootScreenshots.fadeIn(param)\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    var convertInput = function (el) {\r\n      return $(el).parent().html(el.text()).find('.ui.embed').embed({\r\n        autoplay: true\r\n      })\r\n    }\r\n\r\n    var loadVideos = function () {\r\n      var amount = rootVideos.find('.js-video').slice(0, LOAD_MORE_AMOUNT)\r\n      if (!amount.length) return\r\n      blocked = true\r\n\r\n      amount.removeClass('.js-video')\r\n      .each(function () {\r\n        var $this = $(this)\r\n        var $row = $this.parentsUntil('.row').parent().removeClass('invis').hide()\r\n        convertInput($this)\r\n        $row.fadeIn('fast')\r\n      })\r\n\r\n      if (!rootVideos.find('.js-video').length) {\r\n        $('#js-load-more-videos').addClass('disabled')\r\n      }\r\n      blocked = false\r\n    }\r\n  })()\r\n\r\n  !(function () {\r\n    var searchSelect = $('#log-search')\r\n    if (!searchSelect.length) return\r\n\r\n    var updatePath = function updatePath (id) {\r\n      if (!id) id = $('#js-log').attr('data-log-id')\r\n      if (window.history) {\r\n        window.history.replaceState(null, null, '/admin/logs/' + id)\r\n      }\r\n    }\r\n    updatePath()\r\n\r\n    searchSelect.dropdown({\r\n      fullTextSearch: true,\r\n      onChange: function (value) {\r\n        searchSelect.dropdown('refresh')\r\n        var q = $.Deferred()\r\n        searchSelect.addClass('disabled loading')\r\n        var $log = $('#js-log')\r\n\r\n        $log.fadeOut(function () {\r\n          q.resolve()\r\n        })\r\n\r\n        $.ajax({\r\n          url: '/admin/logs/search',\r\n          type: 'POST',\r\n          contentType: 'application/json',\r\n          data: JSON.stringify({id: value}),\r\n          error: function () {\r\n            q.then(function () {\r\n              updatePath(value)\r\n              searchSelect.removeClass('disabled loading')\r\n              $log.show().html('<span style=\"color: red\">Failed to load log (' + value + ')</span>')\r\n            })\r\n          }\r\n        })\r\n        .done(function (html) {\r\n          var $html = $(html)\r\n          q.then(function () {\r\n            updatePath($html.attr('data-log-id'))\r\n            $log.replaceWith(function () {\r\n              return $html.hide().fadeIn(function () {\r\n                searchSelect.removeClass('disabled loading')\r\n              })\r\n            })\r\n          })\r\n        })\r\n      }\r\n    })\r\n  })()\r\n\r\n  !(function () {\r\n    var $info = $('#server-info')\r\n    if (!$info.length) return\r\n    var onFail = function () {\r\n      var d = $('<h4>Failed to get server info</h4>')\r\n      $info.removeClass('loading')\r\n      .append(d.hide().fadeIn('slow'))\r\n    }\r\n\r\n    $.ajax('/a3-server-data')\r\n    .fail(onFail)\r\n    .done(function (response) {\r\n      if (!response.ok || !response.data) return onFail()\r\n\r\n      var data = response.data\r\n      var states = {\r\n        unknown: '<i class=\"yellow help icon\"></i><span>unknown</span>',\r\n        waiting: '<i class=\"yellow wait icon\"></i><span>waiting</span>',\r\n        playing: '<i class=\"green play icon\"></i><span>playing</span>'\r\n      }\r\n\r\n      var $div = $('<div />')\r\n      .append('<p style=\"margin-bottom: 1em\">Name: ' + data.name + '</p>')\r\n      if (data.state !== 'unknown') {\r\n        $div.append('<p>Adress: ' + data.adress + '</p>')\r\n      }\r\n      $div.append('<p>State: ' + states[data.state] + '</p>')\r\n\r\n      if (data.state === 'playing') {\r\n        $div.append('<p>Island: ' + data.island + '</p>')\r\n        .append('<p>Mission: ' + data.mission + '</p>')\r\n\r\n        if (!data.players.length) $div.append('<p>Players: ' + (data.players.length) + '/' + data.maxPlayers + '</p>')\r\n        else {\r\n          var list = '<a style=\"cursor: pointer\">Players: ' + data.players.length + '/' + data.maxPlayers + '</a>' +\r\n          '<div class=\"ui flowing popup transition hidden\">' +\r\n          '<div class=\"ui small relaxed list\">'\r\n          data.players.forEach(function (v) { list += '<span class=\"item\">' + v.time + 'h&nbsp;|&nbsp;' + escapeHTML(v.name) + '</span>' })\r\n          list += '</div></div>'\r\n          $div.append($(list).popup({on: 'click', position: 'bottom right', lastResort: 'bottom center'}))\r\n        }\r\n      }\r\n\r\n      $div.append('<p class=\"mt-top1\">TS3: thor.prfn.se</p>')\r\n      if (data.ts3.length) {\r\n        var l = '<a style=\"cursor: pointer\">Users: ' + data.ts3.length + '</a>' +\r\n        '<div class=\"ui flowing popup transition hidden\">' +\r\n        '<div class=\"ui small ordered relaxed list\">'\r\n        data.ts3.forEach(function (v) { l += '<span class=\"item\">' + escapeHTML(v) + '</span>' })\r\n        l += '</div></div>'\r\n        $div.append($(l).popup({on: 'click', position: 'bottom right', lastResort: 'bottom center'}))\r\n      }\r\n\r\n      $info.removeClass('loading')\r\n      .find('.content').append($div.hide().fadeIn(800))\r\n    })\r\n  })()\r\n\r\n  !(function () {\r\n    var $eventSlotsForm = $('#js-event-slots')\r\n    if (!$eventSlotsForm.length) return\r\n\r\n    var isBusy = false\r\n    var handleSlotBtnClick = function handleSlotBtnClick (el, endpoint) {\r\n      if (isBusy) return\r\n      isBusy = true\r\n\r\n      var $itemSlot = $(el).parentsUntil('.list', '.js-slot-item')\r\n      var data = {\r\n        eventId: $('#js-event-id').val(),\r\n        slotId: $itemSlot.attr('data-id')\r\n      }\r\n\r\n      $.ajax({\r\n        url: '/events/' + endpoint,\r\n        type: 'POST',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify(data)\r\n      })\r\n      .success(function (response) {\r\n        if (response.ok) return window.location.reload()\r\n\r\n        var msg = $('<div class=\"ui pointing red tiny label\">' + response.error + '</div>')\r\n        $itemSlot.find('.content:not(.floated)').append(msg)\r\n        setTimeout(function () {\r\n          msg.remove()\r\n          isBusy = false\r\n        }, 3000)\r\n      })\r\n    }\r\n\r\n    $eventSlotsForm.on('click', '.js-slot-reserve', function () {\r\n      handleSlotBtnClick(this, 'slot-reserve')\r\n    })\r\n\r\n    $eventSlotsForm.on('click', '.js-slot-unreserve', function () {\r\n      handleSlotBtnClick(this, 'slot-unreserve')\r\n    })\r\n\r\n    $eventSlotsForm.on('click', '.js-slot-kick', function () {\r\n      handleSlotBtnClick(this, 'slot-kick')\r\n    })\r\n  })()\r\n})(window.jQuery)\r\n\r\n/*! js-cookie v2.0.3 | MIT */\r\n/*eslint-disable */\r\n!function(a){if(\"function\"==typeof define&&define.amd)define(a);else if(\"object\"==typeof exports)module.exports=a();else{var b=window.Cookies,c=window.Cookies=a(window.jQuery);c.noConflict=function(){return window.Cookies=b,c}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if(arguments.length>1){if(f=a({path:\"/\"},d.defaults,f),\"number\"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{g=JSON.stringify(e),/^[\\{\\[]/.test(g)&&(e=g)}catch(i){}return e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\\(\\)]/g,escape),document.cookie=[b,\"=\",e,f.expires&&\"; expires=\"+f.expires.toUTCString(),f.path&&\"; path=\"+f.path,f.domain&&\"; domain=\"+f.domain,f.secure?\"; secure\":\"\"].join(\"\")}b||(g={});for(var j=document.cookie?document.cookie.split(\"; \"):[],k=/(%[0-9A-Z]{2})+/g,l=0;l<j.length;l++){var m=j[l].split(\"=\"),n=m[0].replace(k,decodeURIComponent),o=m.slice(1).join(\"=\");'\"'===o.charAt(0)&&(o=o.slice(1,-1));try{if(o=c&&c(o,n)||o.replace(k,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(i){}if(b===n){g=o;break}b||(g[n]=o)}catch(i){}}return g}return d.get=d.set=d,d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,\"\",a(c,{expires:-1}))},d.withConverter=b,d}return b()});\r\n/*eslint-enable */\r\n"]}